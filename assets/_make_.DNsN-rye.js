import{_ as U}from"./nuxt-img.B4pQPBbg.js";import{_ as K}from"./nuxt-link.D_5R5EW1.js";import{o as v,c as C,a as w,f as y,b as N,w as z,t as W,g as Y,y as Q,i as $,z as J,A as X,B as M,C as Z,D as E,E as ee,G as te,H as ne,I as re,F as ae,r as oe,J as B,m as se,h as ie,n as ce}from"./entry.slxBjbjw.js";import{u as le}from"./fetch.TuZMNjhR.js";import"./vue.f36acd1f.Ca9TJZQ5.js";const ue=""+new URL("heartFilled.DVIIbLWt.png",import.meta.url).href,fe=""+new URL("heartOutline.DHlaH5YD.png",import.meta.url).href,de={class:"relative h-full"},pe=["src"],me={class:"card-body relative"},he=w("span",{class:"badge border-0 absolute top-1"},"HOT",-1),_e={class:"card-title text-base"},ge={__name:"ProductCard",props:{car:Object,favored:Boolean},emits:["favor"],setup(e,{emit:t}){const n=t,r=Y();return(o,s)=>{const l=U,c=K;return v(),C("li",null,[w("div",de,[w("img",{src:e.favored?y(ue):y(fe),class:"w-10 h-10 z-20 absolute bottom-4 right-4 cursor-pointer",alt:"",onClick:s[0]||(s[0]=f=>n("favor",e.car.id))},null,8,pe),N(c,{to:`/product/${e.car.name}-${e.car.id}`,class:"card h-full bg-base-100 shadow-xl"},{default:z(()=>[N(l,{src:`${y(r).public.supabase.url}/storage/v1/object/public/images/${e.car.image}`,alt:"prdouct",class:"p-8 h-60 object-contain"},null,8,["src"]),w("div",me,[he,w("h2",_e,W(e.car.name),1),w("p",null,"$ "+W(e.car.price),1)])]),_:1},8,["to"])])])}}},ye=ge,be=Symbol.for("nuxt:client-only"),we=Q({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(e,{slots:t,attrs:n}){const r=$(!1);return J(()=>{r.value=!0}),X(be,!0),o=>{var f;if(r.value)return(f=t.default)==null?void 0:f.call(t);const s=t.fallback||t.placeholder;if(s)return s();const l=o.fallback||o.placeholder||"",c=o.fallbackTag||o.placeholderTag||"span";return C(c,n,l)}}});function ve(e){return ee()?(te(e),!0):!1}function T(e){return typeof e=="function"?e():y(e)}const Se=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Ce=Object.prototype.toString,Oe=e=>Ce.call(e)==="[object Object]",xe=()=>{};function Ae(e,t){function n(...r){return new Promise((o,s)=>{Promise.resolve(e(()=>t.apply(this,r),{fn:t,thisArg:this,args:r})).then(o).catch(s)})}return n}const H=e=>e();function Fe(e=H){const t=$(!0);function n(){t.value=!1}function r(){t.value=!0}const o=(...s)=>{t.value&&e(...s)};return{isActive:Z(t),pause:n,resume:r,eventFilter:o}}function ke(e){return e||ne()}function Ne(e,t,n={}){const{eventFilter:r=H,...o}=n;return E(e,Ae(r,t),o)}function $e(e,t,n={}){const{eventFilter:r,...o}=n,{eventFilter:s,pause:l,resume:c,isActive:f}=Fe(r);return{stop:Ne(e,t,{...o,eventFilter:s}),pause:l,resume:c,isActive:f}}function Ee(e,t=!0,n){ke()?J(e,n):t?e():M(e)}function Te(e){var t;const n=T(e);return(t=n==null?void 0:n.$el)!=null?t:n}const k=Se?window:void 0;function P(...e){let t,n,r,o;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,r,o]=e,t=k):[t,n,r,o]=e,!t)return xe;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const s=[],l=()=>{s.forEach(d=>d()),s.length=0},c=(d,u,b,p)=>(d.addEventListener(u,b,p),()=>d.removeEventListener(u,b,p)),f=E(()=>[Te(t),T(o)],([d,u])=>{if(l(),!d)return;const b=Oe(u)?{...u}:u;s.push(...n.flatMap(p=>r.map(O=>c(d,p,O,b))))},{immediate:!0,flush:"post"}),h=()=>{f(),l()};return ve(h),h}const A=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},F="__vueuse_ssr_handlers__",De=je();function je(){return F in A||(A[F]=A[F]||{}),A[F]}function Le(e,t){return De[e]||t}function We(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const Pe={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},V="vueuse-storage";function Ve(e,t,n,r={}){var o;const{flush:s="pre",deep:l=!0,listenToStorageChanges:c=!0,writeDefaults:f=!0,mergeDefaults:h=!1,shallow:d,window:u=k,eventFilter:b,onError:p=a=>{console.error(a)},initOnMounted:O}=r,_=(d?re:$)(typeof t=="function"?t():t);if(!n)try{n=Le("getDefaultStorage",()=>{var a;return(a=k)==null?void 0:a.localStorage})()}catch(a){p(a)}if(!n)return _;const g=T(t),D=We(g),S=(o=r.serializer)!=null?o:Pe[D],{pause:R,resume:j}=$e(_,()=>I(_.value),{flush:s,deep:l,eventFilter:b});u&&c&&Ee(()=>{P(u,"storage",x),P(u,V,G),O&&x()}),O||x();function L(a,i){u&&u.dispatchEvent(new CustomEvent(V,{detail:{key:e,oldValue:a,newValue:i,storageArea:n}}))}function I(a){try{const i=n.getItem(e);if(a==null)L(i,null),n.removeItem(e);else{const m=S.write(a);i!==m&&(n.setItem(e,m),L(i,m))}}catch(i){p(i)}}function q(a){const i=a?a.newValue:n.getItem(e);if(i==null)return f&&g!=null&&n.setItem(e,S.write(g)),g;if(!a&&h){const m=S.read(i);return typeof h=="function"?h(m,g):D==="object"&&!Array.isArray(m)?{...g,...m}:m}else return typeof i!="string"?i:S.read(i)}function x(a){if(!(a&&a.storageArea!==n)){if(a&&a.key==null){_.value=g;return}if(!(a&&a.key!==e)){R();try{(a==null?void 0:a.newValue)!==S.write(_.value)&&(_.value=q(a))}catch(i){p(i)}finally{a?M(j):j()}}}}function G(a){x(a.detail)}return _}function ze(e,t,n={}){const{window:r=k}=n;return Ve(e,t,r==null?void 0:r.localStorage,n)}const Je={class:"productList grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-4"},Me={__name:"Cards",props:{cars:Array},setup(e){const t=ze("favorite",{}),n=r=>{r in t.value?delete t.value[r]:t.value={...t.value,[r]:!0}};return(r,o)=>{const s=ye,l=we;return v(),C("ul",Je,[N(l,null,{default:z(()=>[(v(!0),C(ae,null,oe(e.cars,c=>(v(),B(s,{key:c.id,car:c,onFavor:n,favored:c.id in y(t)},null,8,["car","favored"]))),128))]),_:1})])}}},Be=Me,He=async(e,t)=>{const{data:n,error:r,refresh:o}=await le(`/api/cars/${e}`,{params:{...t}},"$3y0lmp87o4");if(r.value)throw se({...r.value,statusMessage:"unable to fetch cars"});return{data:n,refresh:o}},Re={key:1,class:"text-center"},Ye={__name:"[[make]]",async setup(e){let t,n;const r=ie(),{data:o,refresh:s}=([t,n]=ce(()=>He(r.params.city,{minPrice:r.query.minPrice,maxPrice:r.query.maxPrice,make:r.params.make})),t=await t,n(),t);return E(()=>r.query,()=>{window.location.reload(!0)}),(l,c)=>{const f=Be;return y(o).length?(v(),B(f,{key:0,cars:y(o)},null,8,["cars"])):(v(),C("div",Re,"No Cars Found."))}}};export{Ye as default};
