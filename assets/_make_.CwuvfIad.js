import{_ as U}from"./nuxt-img.C9xeO4j0.js";import{_ as K}from"./nuxt-link.BpRWRB7g.js";import{o as b,c as C,a as w,f as v,b as N,w as z,t as W,y as Y,k as E,z as J,A as Q,B as M,C as X,D as T,E as Z,G as ee,H as te,I as ne,F as re,r as ae,J as B,g as oe,h as se,i as ie}from"./entry.X6w5wH3g.js";import{u as ce}from"./fetch.CmRo8kJw.js";import"./vue.f36acd1f.Bqk0gio4.js";const le=""+new URL("heartFilled.DVIIbLWt.png",import.meta.url).href,ue=""+new URL("heartOutline.DHlaH5YD.png",import.meta.url).href,fe={class:"relative h-full"},de=["src"],pe={class:"card-body relative"},me=w("span",{class:"badge border-0 absolute top-1"},"HOT",-1),he={class:"card-title text-base"},_e={__name:"ProductCard",props:{car:Object,favored:Boolean},emits:["favor"],setup(e,{emit:t}){const n=t;return(r,a)=>{const s=U,c=K;return b(),C("li",null,[w("div",fe,[w("img",{src:e.favored?v(le):v(ue),class:"w-10 h-10 z-20 absolute bottom-4 right-4 cursor-pointer",alt:"",onClick:a[0]||(a[0]=l=>n("favor",e.car.id))},null,8,de),N(c,{to:`/product/${e.car.name}-${e.car.id}`,class:"card h-full bg-base-100 shadow-xl"},{default:z(()=>[N(s,{src:e.car.url,alt:"prdouct",class:"p-8 h-60 object-contain"},null,8,["src"]),w("div",pe,[me,w("h2",he,W(e.car.name),1),w("p",null,"$ "+W(e.car.price),1)])]),_:1},8,["to"])])])}}},ye=_e,ge=Symbol.for("nuxt:client-only"),we=Y({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(e,{slots:t,attrs:n}){const r=E(!1);return J(()=>{r.value=!0}),Q(ge,!0),a=>{var f;if(r.value)return(f=t.default)==null?void 0:f.call(t);const s=t.fallback||t.placeholder;if(s)return s();const c=a.fallback||a.placeholder||"",l=a.fallbackTag||a.placeholderTag||"span";return C(l,n,c)}}});function be(e){return Z()?(ee(e),!0):!1}function $(e){return typeof e=="function"?e():v(e)}const ve=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Se=Object.prototype.toString,Ce=e=>Se.call(e)==="[object Object]",Oe=()=>{};function xe(e,t){function n(...r){return new Promise((a,s)=>{Promise.resolve(e(()=>t.apply(this,r),{fn:t,thisArg:this,args:r})).then(a).catch(s)})}return n}const H=e=>e();function Ae(e=H){const t=E(!0);function n(){t.value=!1}function r(){t.value=!0}const a=(...s)=>{t.value&&e(...s)};return{isActive:X(t),pause:n,resume:r,eventFilter:a}}function Fe(e){return e||te()}function ke(e,t,n={}){const{eventFilter:r=H,...a}=n;return T(e,xe(r,t),a)}function Ne(e,t,n={}){const{eventFilter:r,...a}=n,{eventFilter:s,pause:c,resume:l,isActive:f}=Ae(r);return{stop:ke(e,t,{...a,eventFilter:s}),pause:c,resume:l,isActive:f}}function Ee(e,t=!0,n){Fe()?J(e,n):t?e():M(e)}function Te(e){var t;const n=$(e);return(t=n==null?void 0:n.$el)!=null?t:n}const k=ve?window:void 0;function P(...e){let t,n,r,a;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,r,a]=e,t=k):[t,n,r,a]=e,!t)return Oe;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const s=[],c=()=>{s.forEach(d=>d()),s.length=0},l=(d,u,g,p)=>(d.addEventListener(u,g,p),()=>d.removeEventListener(u,g,p)),f=T(()=>[Te(t),$(a)],([d,u])=>{if(c(),!d)return;const g=Ce(u)?{...u}:u;s.push(...n.flatMap(p=>r.map(O=>l(d,p,O,g))))},{immediate:!0,flush:"post"}),h=()=>{f(),c()};return be(h),h}const A=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},F="__vueuse_ssr_handlers__",$e=De();function De(){return F in A||(A[F]=A[F]||{}),A[F]}function Le(e,t){return $e[e]||t}function je(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const We={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},V="vueuse-storage";function Pe(e,t,n,r={}){var a;const{flush:s="pre",deep:c=!0,listenToStorageChanges:l=!0,writeDefaults:f=!0,mergeDefaults:h=!1,shallow:d,window:u=k,eventFilter:g,onError:p=o=>{console.error(o)},initOnMounted:O}=r,_=(d?ne:E)(typeof t=="function"?t():t);if(!n)try{n=Le("getDefaultStorage",()=>{var o;return(o=k)==null?void 0:o.localStorage})()}catch(o){p(o)}if(!n)return _;const y=$(t),D=je(y),S=(a=r.serializer)!=null?a:We[D],{pause:I,resume:L}=Ne(_,()=>R(_.value),{flush:s,deep:c,eventFilter:g});u&&l&&Ee(()=>{P(u,"storage",x),P(u,V,G),O&&x()}),O||x();function j(o,i){u&&u.dispatchEvent(new CustomEvent(V,{detail:{key:e,oldValue:o,newValue:i,storageArea:n}}))}function R(o){try{const i=n.getItem(e);if(o==null)j(i,null),n.removeItem(e);else{const m=S.write(o);i!==m&&(n.setItem(e,m),j(i,m))}}catch(i){p(i)}}function q(o){const i=o?o.newValue:n.getItem(e);if(i==null)return f&&y!=null&&n.setItem(e,S.write(y)),y;if(!o&&h){const m=S.read(i);return typeof h=="function"?h(m,y):D==="object"&&!Array.isArray(m)?{...y,...m}:m}else return typeof i!="string"?i:S.read(i)}function x(o){if(!(o&&o.storageArea!==n)){if(o&&o.key==null){_.value=y;return}if(!(o&&o.key!==e)){I();try{(o==null?void 0:o.newValue)!==S.write(_.value)&&(_.value=q(o))}catch(i){p(i)}finally{o?M(L):L()}}}}function G(o){x(o.detail)}return _}function Ve(e,t,n={}){const{window:r=k}=n;return Pe(e,t,r==null?void 0:r.localStorage,n)}const ze={class:"productList grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-4"},Je={__name:"Cards",props:{cars:Array},setup(e){const t=Ve("favorite",{}),n=r=>{r in t.value?delete t.value[r]:t.value={...t.value,[r]:!0}};return(r,a)=>{const s=ye,c=we;return b(),C("ul",ze,[N(c,null,{default:z(()=>[(b(!0),C(re,null,ae(e.cars,l=>(b(),B(s,{key:l.id,car:l,onFavor:n,favored:l.id in v(t)},null,8,["car","favored"]))),128))]),_:1})])}}},Me=Je,Be=async(e,t)=>{const{data:n,error:r,refresh:a}=await ce(`/api/cars/${e}`,{params:{...t}},"$3y0lmp87o4");if(r.value)throw oe({...r.value,statusMessage:"unable to fetch cars"});return{data:n,refresh:a}},He={key:1,class:"text-center"},Ke={__name:"[[make]]",async setup(e){let t,n;const r=se(),{data:a,refresh:s}=([t,n]=ie(()=>Be(r.params.city,{minPrice:r.query.minPrice,maxPrice:r.query.maxPrice,make:r.params.make})),t=await t,n(),t);return T(()=>r.query,()=>{window.location.reload(!0)}),console.log(r.params),console.log(r.query),(c,l)=>{const f=Me;return v(a).length?(b(),B(f,{key:0,cars:v(a)},null,8,["cars"])):(b(),C("div",He,"No Cars Found."))}}};export{Ke as default};
