import{_ as m}from"./nuxt-link.D_5R5EW1.js";import{o,c as r,a as e,f,t as _,b as g,w as p,e as h,g as x,u as b,F as v,r as w,J as $}from"./entry.slxBjbjw.js";import{u as k}from"./fetch.TuZMNjhR.js";const C={class:"shadow rounded overflow-hidden flex justify-between mb-4"},y={class:"flex"},L=["src"],j={class:"p-3"},D={class:"text-2xl"},N={class:"text-blue-400"},B={class:"p-3 flex"},F={__name:"ListingCard",props:{listing:Object},emits:["delectClick"],setup(t,{emit:c}){const s=c,l=x();return(n,i)=>{const a=m;return o(),r("div",C,[e("div",y,[e("img",{src:`${f(l).public.supabase.url}/storage/v1/object/public/images/${t.listing.image}`,alt:"",class:"w-80 mr-3 h-44"},null,8,L),e("div",j,[e("h1",D,_(t.listing.name),1),e("p",N,"$"+_(t.listing.price),1)])]),e("div",B,[g(a,{class:"text-blue-400 mr-4",to:`/profile/listings/view/${t.listing.id}`},{default:p(()=>[h("View")]),_:1},8,["to"]),e("p",{class:"text-red-400 cursor-pointer",onClick:i[0]||(i[0]=d=>s("deleteClick",t.listing.id))}," Delete ")])])}}},V=F,O={class:"flex justify-between mt-24 items-center"},S=e("h1",{class:"text-6xl"},"My Listings",-1),E={class:"shadow rounded p-3 mt-5"},T={__name:"index",setup(t){const c=b(),{data:s}=k(`/api/car/listings/user/${c.value.id}`,"$FmO4eLaDnh"),l=async n=>{await $fetch(`/api/car/listings/${n}`,{method:"delete"}),s.value=s.value.filter(i=>i.id!==n)};return(n,i)=>{const a=m,d=V;return o(),r("div",null,[e("div",O,[S,g(a,{to:"/profile/listings/create",class:"w-9 h-9 bg-blue-400 flex justify-center items-center rounded-full text-white font-bold cursor-pointer"},{default:p(()=>[h("+")]),_:1})]),e("div",E,[(o(!0),r(v,null,w(f(s),u=>(o(),$(d,{key:u.id,listing:u,onDeleteClick:l},null,8,["listing"]))),128))])])}}};export{T as default};
